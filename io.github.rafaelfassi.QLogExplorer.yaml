app-id: io.github.rafaelfassi.QLogExplorer
runtime: org.kde.Platform
runtime-version: '6.10'
sdk: org.kde.Sdk
rename-appdata-file: qlogexplorer.appdata.xml
rename-desktop-file: qlogexplorer.desktop
rename-icon: qlogexplorer
command: qlogexplorer
finish-args:
  # Required for Qt render.
  - --socket=wayland
  - --device=dri
  # Necessary if X11 fallback takes place.
  - --socket=fallback-x11
  - --share=ipc
  # Necessary to open user log files.
  - --filesystem=home
  # Necessary to open system log files.
  - --filesystem=/var/log
  # Local sockets are used to detect other running instance and forward any open file request to it.
  # Qt requires Network module to use sockets. Even though an error message is print on app startup
  # when no network permission is granted, it's working properly.
  # - --share=network
modules:
  - name: qlogexplorer
    buildsystem: cmake-ninja
    post-install:
      - install -D -m644 packaging/linux/xdg/applications/qlogexplorer.desktop /app/share/applications/qlogexplorer.desktop
      - install -D -m644 packaging/linux/xdg/metainfo/qlogexplorer.appdata.xml /app/share/metainfo/qlogexplorer.appdata.xml
      - install -D -m644 packaging/linux/xdg/icons/hicolor/scalable/apps/qlogexplorer.svg /app/share/icons/hicolor/scalable/apps/qlogexplorer.svg
      - install -D -m644 packaging/linux/xdg/icons/hicolor/16x16/apps/qlogexplorer.png /app/share/icons/hicolor/16x16/apps/qlogexplorer.png
      - install -D -m644 packaging/linux/xdg/icons/hicolor/24x24/apps/qlogexplorer.png /app/share/icons/hicolor/24x24/apps/qlogexplorer.png
      - install -D -m644 packaging/linux/xdg/icons/hicolor/32x32/apps/qlogexplorer.png /app/share/icons/hicolor/32x32/apps/qlogexplorer.png
      - install -D -m644 packaging/linux/xdg/icons/hicolor/64x64/apps/qlogexplorer.png /app/share/icons/hicolor/64x64/apps/qlogexplorer.png
      - install -D -m644 packaging/linux/xdg/icons/hicolor/128x128/apps/qlogexplorer.png /app/share/icons/hicolor/128x128/apps/qlogexplorer.png
      - install -D -m644 packaging/linux/xdg/icons/hicolor/256x256/apps/qlogexplorer.png /app/share/icons/hicolor/256x256/apps/qlogexplorer.png
    sources:
      - type: archive
        url: https://github.com/rafaelfassi/qlogexplorer/archive/refs/tags/v1.1.1.tar.gz
        sha256: 632eb97e40cd37241cd90aa1d27f1e43a450d88350c177a67dc51d4b8b66a4f9
